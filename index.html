<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SHAUNY ‚Ä¢ Neon TV (Game w/ Map + Stats)</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet" />

<style>
:root{
  --bg:#0b0b12;--panel:#151526;--ink:#f2f1ff;--muted:#a6a3c9;--line:rgba(255,255,255,.12);
  --lilac:#a86cff;--aqua:#50e3ff;--pink:#ff8bd4;--yellow:#ffe980
}
html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,system-ui,Inter,Segoe UI,Roboto,Arial}
.tv-wrap{display:flex;justify-content:center;align-items:center;min-height:100dvh;padding:16px}
.tv{
  position:relative;width:min(1200px,96vw);aspect-ratio:16/9;
  background:linear-gradient(145deg,#2a2a3c,#191923);
  border:12px solid #0a0a12;border-radius:24px;
  box-shadow:0 40px 90px rgba(0,0,0,.55),inset 0 0 0 2px rgba(255,255,255,.08);
  overflow:hidden; /* <- hard clip everything to bezel */
}
.screen{
  position:absolute;inset:18px;background:#0f0f16;border-radius:18px;overflow:hidden; /* <- clip children */
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08),0 15px 40px rgba(0,0,0,.5)
}
.screen::after{
  content:"";position:absolute;inset:0;
  background:repeating-linear-gradient(to bottom,rgba(255,255,255,.05) 0 1px,transparent 1px 3px);
  mix-blend-mode:overlay;pointer-events:none;opacity:.2
}
.vignette{position:absolute;inset:0;pointer-events:none;background:radial-gradient(ellipse at center,transparent 60%,rgba(0,0,0,.55) 100%)}

/* HUD */
.hud{
  position:absolute;left:18px;right:18px;top:18px;display:flex;gap:8px;align-items:center;z-index:5;
  background:rgba(20,20,35,.55);backdrop-filter:blur(6px);
  border:1px solid var(--line);border-radius:12px;padding:8px 10px
}
.hud .title{font-weight:800;letter-spacing:.08em;font-size:12px;opacity:.95}
.hud .spacer{flex:1}
.hud .chip{font-family:monospace;font-size:12px;color:#c7c5ff;background:#0e0e18;border:1px solid var(--line);border-radius:10px;padding:4px 8px}

/* GAME */
.game-wrap{position:absolute;inset:18px;display:grid;place-items:center;padding:8px}
#quiz-card{position:relative;margin:auto;padding:18px;max-width:900px;width:min(100%,900px);background:rgba(0,0,0,0.78);
  border:2px solid var(--pink);border-radius:18px;box-shadow:0 0 20px var(--pink), 0 0 45px var(--aqua);text-align:center;font-family:'Orbitron',sans-serif}
#quiz-card h1{font-size:clamp(22px,4vw,34px);color:var(--pink);text-shadow:0 0 12px var(--pink),0 0 24px var(--aqua);margin:6px 0 10px}
#q{font-size:clamp(14px,3.4vw,20px);margin:8px 0 14px}
#opts{display:grid;grid-template-columns:repeat(2,minmax(160px,1fr));gap:12px;justify-content:center}
@media (max-width:640px){#opts{grid-template-columns:1fr}}
#opts button{background:linear-gradient(90deg,var(--pink),var(--aqua));border:none;padding:12px;margin:0;border-radius:12px;
  font-weight:bold;color:#000;cursor:pointer;text-transform:uppercase;min-height:44px;
  box-shadow:0 0 10px var(--pink),0 0 20px var(--aqua);transition:transform .2s, box-shadow .2s}
#opts button:hover{transform:scale(1.03);box-shadow:0 0 18px var(--pink),0 0 36px var(--aqua)}
#result{margin-top:12px;font-size:16px;color:var(--yellow);text-shadow:0 0 10px var(--pink);min-height:24px}
.actions{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:10px}
.actions button{background:#0e0e18;border:1px solid var(--line);color:#fff;border-radius:999px;padding:6px 12px;cursor:pointer}
.game-cta{display:inline-block;margin-top:12px;padding:10px 20px;border-radius:12px;background:linear-gradient(90deg,var(--pink),var(--aqua));
  text-decoration:none;color:#000;font-weight:bold;text-transform:uppercase;box-shadow:0 0 10px var(--pink),0 0 20px var(--aqua)}
.modal{position:absolute;inset:0;background:rgba(0,0,0,.82);display:none;align-items:center;justify-content:center;border-radius:16px;z-index:6}
.modal.open{display:flex}
.modal-card{
  width:min(1000px,94%);max-height:86%;overflow:auto;border-radius:16px;background:linear-gradient(180deg,#1c1c2a,#12121f);
  border:1px solid var(--line);padding:14px;box-shadow:0 0 24px rgba(0,0,0,.5)
}
.modal-head{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.modal-head h3{margin:0;font-size:16px;letter-spacing:.06em}
.modal-head .spacer{flex:1}
.modal-head button{background:#0e0e18;border:1px solid var(--line);color:#fff;border-radius:999px;padding:6px 10px;cursor:pointer}

/* Map inside modal */
#miniMap{width:100%;height:min(520px,62dvh);border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#0e0e18}
.leaflet-div-icon{background:transparent;border:none}
.neon-dot{--c:#a86cff;width:16px;height:16px;display:block;border-radius:50%;background:var(--c);
  border:2px solid rgba(255,255,255,.95);box-shadow:0 0 10px var(--c),0 0 24px var(--c),0 0 40px var(--c)}
.leaflet-popup-content-wrapper{background:var(--panel);color:var(--ink);border-radius:12px;border:1px solid var(--line)}
.leaflet-popup-tip{background:var(--panel)}

/* Stats layout inside modal */
.stats-wrap{display:grid;gap:12px}
.kpis{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}
.kpi{background:linear-gradient(180deg,rgba(168,108,255,.08),rgba(80,227,255,.08));border:1px solid var(--line);
  border-radius:12px;padding:8px}
.kpi-label{font-size:11px;color:var(--muted)} .kpi-value{font-size:18px;font-weight:800}
@media (max-width:900px){.kpis{grid-template-columns:repeat(2,1fr)}}
.table{display:grid;gap:6px}
.head{display:grid;grid-template-columns:1.3fr 3fr .9fr .9fr;gap:8px;font-size:12px;color:var(--muted);padding-bottom:4px;border-bottom:1px solid var(--line)}
.row{display:grid;grid-template-columns:1.3fr 3fr .9fr .9fr;align-items:center;gap:8px}
.cell{font-size:12px} .cell.small{color:var(--muted)}
.cell.bar{background:rgba(255,255,255,.04);border:1px dashed var(--line);border-radius:10px;overflow:hidden}
.bar-fill{height:22px;background:linear-gradient(90deg,var(--lilac),var(--aqua));position:relative;width:var(--w)}
.bar-fill span{position:absolute;right:6px;top:50%;transform:translateY(-50%);font-weight:700;font-size:11px;color:#0f0f16}
.pane{display:grid;grid-template-columns:160px 1fr;gap:14px;align-items:center}
.pie{width:160px;height:160px;border-radius:50%;position:relative;border:1px solid var(--line)}
.pie:after{content:"";position:absolute;inset:22px;background:var(--panel);border-radius:50%;border:1px solid var(--line)}
.legend{display:grid;gap:6px}
.legend-item{display:flex;align-items:center;justify-content:space-between;gap:8px;background:rgba(255,255,255,.04);border:1px solid var(--line);
  padding:8px 10px;border-radius:10px;font-size:12px}
.swatch{width:12px;height:12px;border-radius:3px;display:inline-block}
</style>
</head>
<body>
  <div class="tv-wrap">
    <div class="tv">
      <div class="hud">
        <div class="title">SHAUNY // NEON WORLD</div>
        <span class="chip">WALLFLOWER CIRCUIT</span>
        <div class="spacer"></div>
        <span class="chip">Score 3+ to unlock the EP</span>
      </div>

      <div class="screen">
        <div class="game-wrap">
          <div id="quiz-card">
            <button class="actions" id="restartBtn" title="Try again" style="position:absolute;right:10px;top:10px">‚Üª Try Again</button>
            <h1>Wallflower Circuit</h1>
            <div id="q" aria-live="polite"></div>
            <div id="opts"></div>
            <div class="actions">
              <button id="mapPeek">üó∫Ô∏è Map</button>
              <button id="statsPeek">üìä Stats</button>
            </div>
            <div id="result" aria-live="polite"></div>
          </div>
        </div>
        <div class="vignette"></div>
      </div>

      <!-- MAP MODAL -->
      <div class="modal


